{% extends 'base.html' %}
{% block content %}

<h1>Crop Details</h1>

<div class="row">
    <div class="col s6">
        <div class="card">
            <div class="card-content">
                <span class="card-title">{{ crop.name }}</span>
                <p>Scientific Name: {{ crop.scientific_name }}</p>
                <p>Classification: {{ crop.classification }}</p>
                <p>Regions: {{ crop.regions }}</p>
                <p>Yield: {{ crop.yields }}</p>
                <p>Acreage of Global Production: {{ crop.acreage_of_production }}</p>
                <p>Description: {{ crop.description }}</p>
                <!-- <p>Description: {{ crop.description|linebreaks }}</p> -->
            </div>
                <div class="card-action">
                    <a href="{% url 'crops_update' crop.id %}">Edit</a>
                    <a href="{% url 'crops_delete' crop.id %}">Delete</a>
                </div>
        </div>
    </div>
<div class="col s6">
    <h4>Further Resources</h4>
    <form action="{% url 'add_reading' crop.id %}" method="POST">
        {% csrf_token %}
        <!-- Render the inputs -->
        {{ reading_form.as_p }}
        <input type="submit" class="btn" value="Add Resource">
    </form>
    <table class="striped">
            <thead>
            <tr>
                <th>Date</th>
                <th>Region</th>
                <th>Author</th>
                <th>Title</th>
                <th>Source</th>
            </tr>
        </thead>
        <tbody>
            {% for reading in crop.reading_set.all %}
            <tr>
                <td>{{reading.date}}</td>
                <td>{{reading.get_region_display}}</td>
                <td>{{reading.author}}</td>
                <td>{{reading.title}}</td>
                <td>{{reading.source}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>
<script>
    const dateEl = document.getElementById('id_date');
    // M is Materialize's global variable
    M.Datepicker.init(dateEl, {
        format: 'yyyy-mm-dd',
        defaultDate: new Date(),
        setDefaultDate: true,
        autoClose: true
    });

      // add additional JS to initialize select below
        const selectEl = document.getElementById('id_region');
        M.FormSelect.init(selectEl);
</script>
{% endblock %}